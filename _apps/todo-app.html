---
layout: app
title: TODO List
css: bootstrap-css,material-icons
js: jquery
---

 <div class="container mt-2">
        <div class="card">
            <div class="card-header">
                Todo List
            </div>
            <div class="card-body pb-0">
                <h5 class="card-subtitle mb-2">Add Todo</h5>
                <form action="">
                    <div class="form-group">
                        <input class="form-control" type="text" name="todo" id="todo" placeholder="Enter Todo...">
                        <input class="btn btn-danger mt-2" type="submit" value="Add Todo" id="addtodo">
                    </div>
                </form>
            </div>
            <hr class="mx-2">
            <div class="card-body pt-0">
                <h5 class="card-subtitle my-2">Todo List</h5>
                <form action="">
                    <div class="form-group">
                        <input class="form-control d-inline" type="text" name="filter" id="filter" placeholder="Search Todo...">
                    </div>
                </form>
                <hr class="mx-2">
                <div id="todolist">
                   <div class="card">
                        <ul class="list-group list-group-flush">

                        </ul>
                   </div>
                </div>
                <input class="btn btn-secondary mt-2" type="button" value="Clear All Todos" id="clear">
            </div>

        </div>

    </div>

<script>
const addTodoForm = document.querySelector('#todo');
const addTodoBtn = document.querySelector('#addtodo');
const filterTodo = document.querySelector('#filter');
const todoList1 = document.querySelector('#todolist');
const clearTodos = document.querySelector("#clear");
let isAlert = "False";
let todoList = todoList1.firstElementChild.firstElementChild; 
let Todovalue = "";
const haveTodos = localStorage.getItem("Todos");

addTodoForm.addEventListener("keyup",add);
addTodoBtn.addEventListener("click",addTodo);
todoList.addEventListener("click",removeTodo);
clearTodos.addEventListener("click",clear);
window.addEventListener("load",show);
filterTodo.addEventListener("keyup",search);
filterTodo.addEventListener("blur",searchout);

function add(e){
    Todovalue = e.target.value;
}

let Todos = [];
function addTodo(e){
    if(isAlert == "True"){
        const z = document.querySelector("#alert");
        z.remove();
        isAlert = "False";
    }
    let el = document.createElement("li");
    el.className = "list-group-item d-flex justify-content-between";
    el.textContent = Todovalue;
    let el1 = document.createElement("a");
    el1.href = "";
    el1.className = "delete-item float-right";
    el.appendChild(el1);
    let el2 = document.createElement("i");
    el2.className = "material-icons";
    el2.innerText = "close";
    el1.appendChild(el2);
    todoList.appendChild(el);
    Todos.push(Todovalue);
    if(!(JSON.parse(localStorage.getItem("Todos")) === null)){
    Todos = Todos.concat(JSON.parse(localStorage.getItem("Todos")));
    }
    localStorage.setItem("Todos",JSON.stringify(Todos));
    Todos = [];
    e.preventDefault();
}

function removeTodo(e){
    if(e.target.className == "material-icons"){
    const a = e.path[2];
    a.remove();
    let h = JSON.parse(localStorage.getItem("Todos"));

    for (let i = 0; i < h.length; i++) {
        const element = h[i];
        if(element === a.textContent){
            h[i] = "";
        }
    }
    localStorage.removeItem("Todos");
    h = update(h);
    localStorage.setItem("Todos",JSON.stringify(h));
    
}
    e.preventDefault();
}

function clear(e){
    localStorage.clear();
    Todos = [];
    show();
    e.preventDefault();
}

let xy = document.createElement("div");
xy.className = "alert alert-danger";
xy.textContent = "The todo cannot be founded!";
xy.id = "alert";

function show(){
    let AllTodos = localStorage.getItem("Todos");
    AllTodos = JSON.parse(AllTodos);
    if(AllTodos === null){
        while(!(todoList.firstElementChild===null)){
        todoList.firstElementChild.remove();
    }   
    }else{

        for (let i = 0; i < AllTodos.length; i++) {
        const todo = AllTodos[i];
        let el = document.createElement("li");
        el.className = "list-group-item d-flex justify-content-between";
        el.textContent = todo;
        let el1 = document.createElement("a");
        el1.href = "";
        el1.className = "delete-item float-right";
        el.appendChild(el1);
        let el2 = document.createElement("i");
        el2.className = "material-icons";
        el2.innerText = "close";
        el1.appendChild(el2);
        todoList.appendChild(el);
    }
}

}

function search(e){

    for (let i = 0; i < todoList.children.length; i++) {
        if(e.target.value === todoList.children[i].textContent.slice(0,e.target.value.length)){
            
                todoList.children[i].style.backgroundColor = "aquamarine";
            }else{
                todoList.children[i].style.backgroundColor = "white";
            }
    }
}

function searchout(){
    for (let i = 0; i < todoList.children.length; i++) {
        todoList.children[i].style.backgroundColor = "white";
    }
}



function update(h){
    let j = [];
    for (let i = 0; i < h.length; i++) {
         if(h[i]==""){
             continue;
         }else{
             j.push(h[i]);
         }
    }
    return j;
}
</script>
